"use strict";(self.webpackChunkdzitra=self.webpackChunkdzitra||[]).push([[749],{8749:(J,g,l)=>{l.r(g),l.d(g,{NewsletterModule:()=>M});var p=l(6895),r=l(3456),b=l(933),s=l(4006),u=l(5938),e=l(4650),f=l(5619);function w(i,n){1&i&&(e.TgZ(0,"h5",23),e._uU(1,"Add New Newsletter"),e.qZA())}function C(i,n){1&i&&(e.TgZ(0,"h5",23),e._uU(1,"Newsletter Info"),e.qZA())}function N(i,n){1&i&&(e.TgZ(0,"button",24),e._uU(1,"Add Newsletter"),e.qZA())}function Z(i,n){1&i&&(e.TgZ(0,"button",24),e._uU(1,"Save"),e.qZA())}function A(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editinfo())}),e._uU(1,"Edit"),e.qZA()}}let m=(()=>{class i{constructor(t,a,o,d){this.fb=t,this.http=a,this.dialogRef=o,this.inputData=d,this.isEditMode=!1}ngOnInit(){this.addnewsletterForm=this.fb.group({email:["",s.kI.required],emailvalidated:["",s.kI.required],optedout:["",s.kI.required],is_customer:["",s.kI.required],is_lead:["",s.kI.required]}),this.inputData&&null!==this.inputData&&(this.newsletterId=this.inputData.id,this.isEditMode=!0,this.getData()),this.inputData.isReadonly&&(this.readonly=!0,this.addnewsletterForm.disable())}getData(){this.http.get(`/newsletter/${this.newsletterId}`).subscribe(t=>{if(1==t.status){let a=t.data;this.addnewsletterForm.patchValue({email:a.email,emailvalidated:a.emailvalidated,optedout:a.optedout,is_customer:a.is_customer,is_lead:a.is_lead})}})}onSubmit(t){if(!t.valid)return;let a=t.value;this.newsletterId?(a._id=this.newsletterId,this.http.patch("/newsletter",a).subscribe(o=>{1==o.status&&this.dialogRef.close(1)})):this.http.post("/newsletter",a).subscribe(o=>{1==o.status&&this.dialogRef.close(1)})}editinfo(){this.addnewsletterForm.enable(),this.isEditMode=!0,this.readonly=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(f.h),e.Y36(u.so),e.Y36(u.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-newsletter-modal"]],decls:50,vars:14,consts:[[1,"row"],[1,"dialogue-head","col-md-8"],["mat-dialog-title","",4,"ngIf"],[1,"close-Btns","col-md-4"],[1,"card","close-Card",3,"mat-dialog-close"],["src","../../../../../assets/image/fi_x.png","alt",""],[1,"addform-container"],[3,"formGroup","ngSubmit"],[1,"col-md-6"],["for","email",1,"dialogue-label"],["type","email","formControlName","email","name","email",1,"w-100","input-Class"],["for","emailvalidated",1,"dialogue-label"],["formControlName","emailvalidated","name","emailvalidated",1,"w-100","input-Class"],[3,"value"],["for","optedout",1,"dialogue-label"],["formControlName","optedout","name","optedout",1,"w-100","input-Class"],["for","is_customer",1,"dialogue-label"],["formControlName","is_customer","name","is_customer",1,"w-100","input-Class"],["for","is_lead",1,"dialogue-label"],["formControlName","is_lead","name","is_lead",1,"w-100","input-Class"],[1,"button","col-md-12"],["type","submit","class","createLead-Btns",4,"ngIf"],["type","submit","class","createLead-Btns",3,"click",4,"ngIf"],["mat-dialog-title",""],["type","submit",1,"createLead-Btns"],["type","submit",1,"createLead-Btns",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,w,2,0,"h5",2),e.YNc(3,C,2,0,"h5",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.qZA()()(),e.TgZ(7,"div",6)(8,"form",7),e.NdJ("ngSubmit",function(){return a.onSubmit(a.addnewsletterForm)}),e.TgZ(9,"div",0)(10,"div",8)(11,"label",9),e._uU(12,"Email Id"),e.qZA(),e._UZ(13,"input",10),e.qZA(),e.TgZ(14,"div",8)(15,"label",11),e._uU(16,"Email Validated"),e.qZA(),e.TgZ(17,"select",12)(18,"option",13),e._uU(19,"Yes"),e.qZA(),e.TgZ(20,"option",13),e._uU(21,"No"),e.qZA()()(),e.TgZ(22,"div",8)(23,"label",14),e._uU(24,"Opted Out"),e.qZA(),e.TgZ(25,"select",15)(26,"option",13),e._uU(27,"Yes"),e.qZA(),e.TgZ(28,"option",13),e._uU(29,"No"),e.qZA()()(),e.TgZ(30,"div",8)(31,"label",16),e._uU(32,"Is Customer"),e.qZA(),e.TgZ(33,"select",17)(34,"option",13),e._uU(35,"Yes"),e.qZA(),e.TgZ(36,"option",13),e._uU(37,"No"),e.qZA()()(),e.TgZ(38,"div",8)(39,"label",18),e._uU(40,"Is Lead"),e.qZA(),e.TgZ(41,"select",19)(42,"option",13),e._uU(43,"Yes"),e.qZA(),e.TgZ(44,"option",13),e._uU(45,"No"),e.qZA()()()(),e.TgZ(46,"div",20),e.YNc(47,N,2,0,"button",21),e.YNc(48,Z,2,0,"button",21),e.YNc(49,A,2,0,"button",22),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!a.isEditMode),e.xp6(1),e.Q6J("ngIf",a.isEditMode),e.xp6(5),e.Q6J("formGroup",a.addnewsletterForm),e.xp6(10),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(3),e.Q6J("ngIf",!a.isEditMode&&!a.readonly),e.xp6(1),e.Q6J("ngIf",a.isEditMode&&!a.readonly),e.xp6(1),e.Q6J("ngIf",a.readonly))},dependencies:[p.O5,u.ZT,u.uh,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u]}),i})();var c=l(3091),v=l(2548),S=l(3157),_=l(2016);const y=[{path:"list",component:(()=>{class i{constructor(t,a,o){this.http=t,this.router=a,this.dialog=o,this.columnDefinition=[],this.tablePaginationSettings={},this.rowData=[],this.tablePaginationSettings.enablePagination=!0,this.tablePaginationSettings.pageIndex=1,this.tablePaginationSettings.pageSize=5,this.tablePaginationSettings.pageSizeOptions=[5,10,15],this.tablePaginationSettings.showFirstLastButtons=!0,this.columnDefinition=[{name:"email",displayName:"Email",disableSorting:!1},{name:"emailvalidated",displayName:"Email Validated",disableSorting:!1,isBooleanValue:!0},{name:"optedout",displayName:"Opted Out",disableSorting:!1,isBooleanValue:!0},{name:"is_customer",displayName:"Is Customer",disableSorting:!1,isBooleanValue:!0},{name:"is_lead",displayName:"Is Lead",disableSorting:!1,isBooleanValue:!0},{name:"actiontwo",displayName:"Action",disableSorting:!1,isAction:1}]}ngOnInit(){this.initData()}initData(){this.http.get(`/newsletter/active/createdAt/-1/${this.tablePaginationSettings.pageIndex}/${this.tablePaginationSettings.pageSize}?`).subscribe(t=>{console.log(t,"leadlist"),this.rowData=t.data.list,this.tablePaginationSettings.totalElements=t.data.pagination.total})}onNotifySelected(t){console.log(t,"selected")}isPageChanged(t){this.tablePaginationSettings.pageSize=t.pageSize,this.tablePaginationSettings.pageIndex=t.pageIndex+1,this.initData()}openDialogueModal(t){"add"==t.method?this.dialog.open(m,{width:"60%"}).afterClosed().subscribe(o=>{1==o&&(this.initData(),this.dialog.open(c.e,{data:{title:"New Lead Added",text:"Congratulations! NewsLetter added Successfully",Btn:"Okay",isSuccess:!0,showOnly:!0},width:"35%"}).afterClosed().subscribe(h=>{}))}):"edit"==t.method?this.dialog.open(m,{data:{id:t.id}}).afterClosed().subscribe(d=>{1==d&&(this.initData(),this.dialog.open(c.e,{data:{title:"Newsletter Edited",text:"Newsletter edited successfully",Btn:"Okay",isSuccess:!0,showOnly:!0},width:"35%"}).afterClosed().subscribe(D=>{}))}):"delete"==t.method?this.dialog.open(v.y,{data:{rowId:t.id,dialogueTitle:"Are you sure to Delete?",CloseBtn:"Cancel",confirmBtn:"Delete",collectionName:"newsletter"}}).afterClosed().subscribe(d=>{1==d&&(this.initData(),this.dialog.open(c.e,{data:{title:"Newsletter deleted",text:"Newsletter deleted successfully",Btn:"Okay",isSuccess:!0,showOnly:!0},width:"35%"}).afterClosed().subscribe(D=>{}))}):"view"==t.method&&this.dialog.open(m,{data:{id:t.id,isReadonly:!0},width:"60%"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.h),e.Y36(r.F0),e.Y36(u.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],decls:2,vars:7,consts:[[3,"rowData","enableCheckbox","allowMultiSelect","tableAddBtn","tableHeading","sqPaginationConfig","sqColumnDefinition","getSelectedRows","PageChanged","openmodal"]],template:function(t,a){1&t&&(e._UZ(0,"app-counters"),e.TgZ(1,"app-custom-table",0),e.NdJ("getSelectedRows",function(d){return a.onNotifySelected(d)})("PageChanged",function(d){return a.isPageChanged(d)})("openmodal",function(d){return a.openDialogueModal(d)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("rowData",a.rowData)("enableCheckbox",!0)("allowMultiSelect",!0)("tableAddBtn","Add Newsletter")("tableHeading","Newsletter")("sqPaginationConfig",a.tablePaginationSettings)("sqColumnDefinition",a.columnDefinition))},dependencies:[S.M,_.C]}),i})(),canActivate:[b.a]}];let T=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[r.Bz.forChild(y),r.Bz]}),i})();var I=l(1052);let M=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,T,u.Is,I.g]}),i})()}}]);